[base64(concat('#cloud-config

write_files:
- path: /opt/azure/containers/provision_source.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_installs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_configs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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







- path: /usr/local/bin/configure_azure0.sh
  permissions: "0544"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/6SU0W/bNhDG3/lXfJGFqsVmyR720CQQBsF2N6ONEsTZiiFwDVqiLM4KqZJUPNf2/z5QchS5W7ZhexN0d9/9+N2RvbOg0ipYchEw8Ygl1TkhPUyNpyFFsYVgCdOaqi2MRCJFxleVYqBfKsUG4AI/LythKgzf+oPvSaGXC8UKRjVDn2MPulmj/8678ODtSsWFgfvdwWv+ezt3GLrDSxwDw4OHPVaKleh/5nA+VbW06xCe4R7uDzgLMcD8EiZnggAAS3IJb2rANYQ0TzCzNS9bWC5WR1yvqfmdGwxIxskprvo/uHA+1Q78B9i6zv/XzD2McpaswTOr3GQhEfxYa8VNzhTzfR9CQjCW2tGpSsDkXEMnipfGlgtpSA9RoSVSKTyDDRXmJHeTM1GjVrol6ieCk3ucoZ8hYCYJEsEDwYyfBsNBv07xLUrBtcEcr149wVvyeArD6AMemDBcCotKTdPraIrlZSkyqZDQgif2BGYj1RqlLHiy/YuzkNpYJz7Ju4C7iyd3H69v3y9urj9MR78emtHcw/lzBGEIp+nnYH4ytL93foCl4umKWXxaKEbT7fMtSUkPH9nR3O4geAYtfcJLFFysoXO5eZLr+KUqsSiLasXF6zfYHWlKqYz1cTG6vrqK4nHoDutIQs0/j2OP3z7D8wV9YKAabv2xh58I/gtTmktR/348fu/hN/31/fybEDubftFUfYvnmou24tAtGczt/QhkaWom+8Q0C/QomCEHQjqHiW5/nIXe+7ezxc31eBFHV5PZTTSahCnLaFWYy24kbP2NrNwonnrkxJf4LprGk9vpODw/Pz/vxuLJXTwLA1UJa5HQQStFv9i17qRO39W9mMm/FrmJ7n4Ku8cidpC1Hmiawn29pJrV1rq7tuvhTWeeiMZj0j4U/ZX56qVo9VJWwHlJ0Hle0GG9oJ0G48kHcqLyItUfAQAA//+8Xj4iAgYAAA==

- path: /etc/systemd/system/kubelet.service
  permissions: "0644"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/6SUQW8bNxCF7/srCMGH9kBRstXAacCD3WxSI0YaeBXkYBsLLne8S4g73HCGstym/71YSXYiW0EdRCdpON+bpwH5Lj+i4+vsNZCNrmcXUL9LFXjg7I+AtRsqHwy3+coRk1aJovLBGq8qh2qxbc0u4HNyEUjbgGwcQqzHBHHpLGRZdllsvl5nF0BsImvjb80dZTkuXQzYAfIb50ErYKtquDHJ84N4kawFonzluGDDifR0dpTlK7DFoPUhgl6bqQy1QoWelfk7RVAPVuheakztHq5b1C4K2Qu1NFF5Vz1Mfk6vRfc9L9KKkbsRl+Lgly4kZPFFNBF6cTV6POlqJL6IWyuk/1VID2IirsUrwS2g2Ixd41JWDusnNp8WXokbN9rnfivTmQVIak2Ep2pZ9gikgaQ7suyFvBUIPHb9cjZm25cRODqgQ338/5ANEcYUOrOyAVFPXxwdz35gVGdWJd1hWRm78KF5Lr+e2gGRaaC0gVjPJj9IVSkS6+PJcxeD4Jp2vL3F48aW3Eagdqpnk5cvfk7jUB9PXx7+nMbRdnW7KnIjAxWbygMJyQLNcFe8I97b6vrHrZg6iM7eQ4/3tRsdNuCNa1KEcv1aJ8Pb/Ap8J2jEVSa2HykBh/lyiBmIOycYapDeVOBJjw7+effxND/P5+X7v17n5fnJaX5e/DvaAZb6UEj5EBgyJmTXgY7QBQYh7wsywucExHL4ERLr6W/dPlAC1n1wyDqhW/2ulIoJvwZSrb6NyWAXu2aCTx3I3qfGoaxd3MTisIKIwEBq07FpoG/Yg/t/+ub85G2x7+Aif3tWzPOL9S72lD+dzf8s5ydn7+dFll2eIbHx/jr7ZJChPr3TXfLsZCKIYzaxAf4vAAD//0p6fwdABgAA



- path: /etc/apt/apt.conf.d/99periodic
  permissions: "0644"
  owner: root
  content: |
    APT::Periodic::Update-Package-Lists "0";
    APT::Periodic::Download-Upgradeable-Packages "0";
    APT::Periodic::AutocleanInterval "0";
    APT::Periodic::Unattended-Upgrade "0";








- path: /etc/containerd/config.toml
  permissions: "0644"
  owner: root
  content: |
    version = 2
    subreaper = false
    oom_score = 0
    [plugins."io.containerd.grpc.v1.cri"]
        sandbox_image = "oss/kubernetes/pause:1.3.1"
        [plugins."io.containerd.grpc.v1.cri".containerd]
            [plugins."io.containerd.grpc.v1.cri".containerd.untrusted_workload_runtime]
                runtime_type = "io.containerd.runtime.v1.linux"
                runtime_engine = "/usr/bin/nvidia-container-runtime"
            [plugins."io.containerd.grpc.v1.cri".containerd.default_runtime]
                runtime_type = "io.containerd.runtime.v1.linux"
                runtime_engine = "/usr/bin/nvidia-container-runtime"
    
    [plugins."io.containerd.grpc.v1.cri".registry.headers]
      X-Meta-Source-Client = ["azure/aks"]
    [metrics]
    address = "127.0.0.1:10257"
    #EOF

- path: /etc/containerd/kubenet_template.conf
  permissions: "0644"
  owner: root
  content: |
      {
          "cniVersion": "0.3.1",
          "name": "kubenet",
          "plugins": [{
            "type": "bridge",
            "bridge": "cbr0",
            "mtu": 1500,
            "addIf": "eth0",
            "isGateway": true,
            "ipMasq": true,
            "promisMode": true,
            "hairpinMode": false,
            "ipam": {
                "type": "host-local",
                "subnet": "{{.PodCIDR}}",
                "routes": [{ "dst": "0.0.0.0/0" }]
            }
          }]
      }

- path: /etc/systemd/system/containerd.service
  permissions: "0644"
  owner: root
  content: |
    [Unit]
    Description=containerd daemon
    After=network.target

    [Service]
    ExecStartPre=/sbin/modprobe overlay
    ExecStart=/usr/bin/containerd
    Delegate=yes
    KillMode=process
    OOMScoreAdjust=-999
    LimitNOFILE=1048576
    LimitNPROC=infinity
    LimitCORE=infinity

    [Install]
    WantedBy=multi-user.target

    #EOF

- path: /etc/systemd/system/containerd.service.d/exec_start.conf
  permissions: "0644"
  owner: root
  content: |
    [Service]
    ExecStartPost=/sbin/iptables -P FORWARD ACCEPT
    #EOF

- path: /etc/crictl.yaml
  permissions: "0644"
  owner: root
  content: |
    runtime-endpoint: unix:///run/containerd/containerd.sock
    #EOF





- path: /etc/systemd/system/nvidia-modprobe.service
  permissions: "0644"
  owner: root
  content: |
    [Unit]
    Description=Installs and loads Nvidia GPU kernel module
    [Service]
    Type=oneshot
    RemainAfterExit=true
    ExecStartPre=/bin/sh -c "dkms autoinstall --verbose"
    ExecStart=/bin/sh -c "nvidia-modprobe -u -c0"
    ExecStartPost=/bin/sh -c "sleep 10 && systemctl restart kubelet"
    [Install]
    WantedBy=multi-user.target


- path: /etc/kubernetes/certs/ca.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    

- path: /etc/kubernetes/certs/client.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    



- path: /var/lib/kubelet/kubeconfig
  permissions: "0644"
  owner: root
  content: |
    apiVersion: v1
    kind: Config
    clusters:
    - name: localcluster
      cluster:
        certificate-authority: /etc/kubernetes/certs/ca.crt
        server: https://:443
    users:
    - name: client
      user:
        client-certificate: /etc/kubernetes/certs/client.crt
        client-key: /etc/kubernetes/certs/client.key
    contexts:
    - context:
        cluster: localcluster
        user: client
      name: localclustercontext
    current-context: localclustercontext
    #EOF

- path: /etc/default/kubelet
  permissions: "0644"
  owner: root
  content: |
    KUBELET_FLAGS=
    KUBELET_REGISTER_SCHEDULABLE=true
    NETWORK_POLICY=
    KUBELET_IMAGE=hyperkube-amd64:v1.15.7


    KUBELET_NODE_LABELS=kubernetes.azure.com/role=agent,node-role.kubernetes.io/agent=,kubernetes.io/role=agent,agentpool=agent2,storageprofile=managed,storagetier=Standard_LRS,accelerator=nvidia,kubernetes.azure.com/cluster=',variables('labelResourceGroup'),'

    #EOF

- path: /opt/azure/containers/kubelet.sh
  permissions: "0755"
  owner: root
  content: |
    #!/bin/bash

    


    # Disallow container from reaching out to the special IP address 168.63.129.16
    # for TCP protocol (which http uses)
    #
    # 168.63.129.16 contains protected settings that have priviledged info.
    #
    # The host can still reach 168.63.129.16 because it goes through the OUTPUT chain, not FORWARD.
    #
    # Note: we should not block all traffic to 168.63.129.16. For example UDP traffic is still needed
    # for DNS.
    iptables -I FORWARD -d 168.63.129.16 -p tcp --dport 80 -j DROP
    #EOF

runcmd:
- set -x
- . /opt/azure/containers/provision_source.sh
- aptmarkWALinuxAgent hold
'))]
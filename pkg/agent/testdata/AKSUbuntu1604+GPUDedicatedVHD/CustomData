[base64(concat('#cloud-config

write_files:
- path: /opt/azure/containers/provision_source.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_installs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_configs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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







- path: /usr/local/bin/configure_azure0.sh
  permissions: "0544"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/4SSUW/aMBSF3/0rTgGVVhsJfRutoikCtqG2ARW0akIImcQBr+k1s52yFvjvk5OWpVOr5Smy7z333M+nfuTnRvsLSb6gByy4WTFWR3cl4jvIFHYlwJ9yLRCTRKwolUtI48618DwPpEBCJLAKOifYlTQwsZZr69pJWVZHmBmFRFHTYsPJvqrdrAS5MuRG0rKc1YpJsimO0ErhCxv7MUmfhPUS/6zdKko8ZyWTxmKG42OI39KiXTiPBrCC3+NekJWKnFVuy1nSFJOcX5EgVRoxz2TsNrAbpe+wVpmMH9/YhckU0ylqjW3Un9wOby7no+HVoPtjX0MQoFbK1DCbXTgyxAC8eErl20DbWGiZLIVzxTMtePL4zDfXImF13IpnZlW+MoVRHpNrZJLuYFZq8yJXwaBzmq+zfCnp5BTbwk3paK20dYjm3eH1dRj1gsbZ4Tbm9v+0d/j5C02P+L0AN2gUPzt4McnvQhupqDh+eP7fwSt9mOnsQ4CtKz8vuz7ib8/5oWNfbWnPmtjBV2tbeHIhLfPxQMKyPWOVhcKbr+OgeflpPB8Ne/MovO6PR2G3HyQi5XlmL6o3wYFz6OS60aDJXrGJJuEg6t8MekGn0+lU76L+JBoHvs7JISLjH6T4k0ttpXTwpZgl7OpfkVE4+RZU12LuQQs98CRB42TBjSjQNraHqfvTyrsi7PVYkUo0PqO1tGijGj73HTQTkaH2nmitEg9pcVYEtjKo179ir5TedfcnAAD//9oCkudMBAAA

- path: /etc/systemd/system/kubelet.service
  permissions: "0644"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/6SU0U8iMRDG3/evaIgPdw9lAYnBmD7ouXpE4hkX4wOSTbcMuw3ddtOZRbjz/vfLAnoHYk5jH6ff7/smk3ZGd1bTODgHVF6XpJ0VV1UKBij45uxE15UbSXm00Egowgp9aJySJky1DWcbaRCMYvBzrWAc3AKS9CSkeZRLDCI7197ZAixdaAMiBFLhBKayMvTCx5VSgBgtNMUkqULR7h4G0QJUXHvdeBCrvFRizkJXUih/Vh5C5SxJbcHjs1UT8z1cMZtoz3jJwrn0odHpS/J7tMrqt3rhijX0lI3YwZfCVZbYE8s8lOyhsZv00GBP7FExbr4yboC12JidMMrBsnXsCuc81Xbyqs3XhRM21Y193W9sCjkDjrn08NotCHZArElcoiLD+COzQE1dzrtNUmXigbwG7Ije/yHlPDTRFXKhnLWifXTY634gqpCLBJc2SaWaGZe9l1+lFoAoM0iUQxLd1geptPJIotd672As6Cxvbl5xM1MJ5R4wb4tu6/jocx4d0Wsfdz7ncbgZ3bYLX9tASjI1gIwTs7J+K0Yj7ZXqcldqqwK8Vs/Q7ry2t4NydqqzykOy+q2t+m/+Bd7YJewhYJvDOdg6nyP4OfitG+smwI1MwaBoHPy6ujuLBtEwuf5xHiWD07NoEP9ubAFz0WHbBWeqAnhpqkxbPtF+vZrqNrwFAgzXirUA/2EPntMuBqeX8b6L2+iyHw+j21U/e8r3/eH3ZHjavx7GQTDqWyRpzDi4l5ZgcrYURWVI8wrBN0n6DOhPAAAA//+HJPwRpwUAAA==



- path: /etc/apt/apt.conf.d/99periodic
  permissions: "0644"
  owner: root
  content: |
    APT::Periodic::Update-Package-Lists "0";
    APT::Periodic::Download-Upgradeable-Packages "0";
    APT::Periodic::AutocleanInterval "0";
    APT::Periodic::Unattended-Upgrade "0";




    

- path: /etc/systemd/system/docker.service.d/exec_start.conf
  permissions: "0644"
  owner: root
  content: |
    [Service]
    ExecStart=
    ExecStart=/usr/bin/dockerd -H fd:// --storage-driver=overlay2 --bip=
    ExecStartPost=/sbin/iptables -P FORWARD ACCEPT
    LimitNPROC=infinity
    LimitCORE=infinity
    #EOF

- path: /etc/docker/daemon.json
  permissions: "0644"
  owner: root
  content: |
    {
      "live-restore": true,
      "log-driver": "json-file",
      "log-opts":  {
         "max-size": "50m",
         "max-file": "5"
      }
      ,"default-runtime": "nvidia",
      "runtimes": {
         "nvidia": {
             "path": "/usr/bin/nvidia-container-runtime",
             "runtimeArgs": []
        }
      }
    }







- path: /etc/systemd/system/nvidia-modprobe.service
  permissions: "0644"
  owner: root
  content: |
    [Unit]
    Description=Installs and loads Nvidia GPU kernel module
    [Service]
    Type=oneshot
    RemainAfterExit=true
    ExecStartPre=/bin/sh -c "dkms autoinstall --verbose"
    ExecStart=/bin/sh -c "nvidia-modprobe -u -c0"
    ExecStartPost=/bin/sh -c "sleep 10 && systemctl restart kubelet"
    [Install]
    WantedBy=multi-user.target


- path: /etc/kubernetes/certs/ca.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    

- path: /etc/kubernetes/certs/client.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    



- path: /var/lib/kubelet/kubeconfig
  permissions: "0644"
  owner: root
  content: |
    apiVersion: v1
    kind: Config
    clusters:
    - name: localcluster
      cluster:
        certificate-authority: /etc/kubernetes/certs/ca.crt
        server: https://:443
    users:
    - name: client
      user:
        client-certificate: /etc/kubernetes/certs/client.crt
        client-key: /etc/kubernetes/certs/client.key
    contexts:
    - context:
        cluster: localcluster
        user: client
      name: localclustercontext
    current-context: localclustercontext
    #EOF

- path: /etc/default/kubelet
  permissions: "0644"
  owner: root
  content: |
    KUBELET_FLAGS=--address=0.0.0.0 --anonymous-auth=false --authentication-token-webhook=true --authorization-mode=Webhook --azure-container-registry-config=/etc/kubernetes/azure.json --cgroups-per-qos=true --client-ca-file=/etc/kubernetes/certs/ca.crt --cloud-config=/etc/kubernetes/azure.json --cloud-provider=azure --cluster-dns=10.0.0.10 --cluster-domain=cluster.local --enforce-node-allocatable=pods --event-qps=0 --eviction-hard=memory.available<750Mi,nodefs.available<10%,nodefs.inodesFree<5% --feature-gates=RotateKubeletServerCertificate=true,a=b,PodPriority=true,x=y --image-gc-high-threshold=85 --image-gc-low-threshold=80 --kube-reserved=cpu=100m,memory=1638Mi --max-pods=110 --node-status-update-frequency=10s --pod-manifest-path=/etc/kubernetes/manifests --pod-max-pids=-1 --protect-kernel-defaults=true --read-only-port=10255 --resolv-conf=/etc/resolv.conf --rotate-certificates=true --streaming-connection-idle-timeout=4h0m0s --system-reserved=cpu=2,memory=1Gi --tls-cert-file=/etc/kubernetes/certs/kubeletserver.crt --tls-cipher-suites=TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_RSA_WITH_AES_256_GCM_SHA384,TLS_RSA_WITH_AES_128_GCM_SHA256 --tls-private-key-file=/etc/kubernetes/certs/kubeletserver.key 
    KUBELET_REGISTER_SCHEDULABLE=true
    NETWORK_POLICY=
    KUBELET_IMAGE=hyperkube-amd64:v1.15.7


    KUBELET_NODE_LABELS=kubernetes.azure.com/role=agent,node-role.kubernetes.io/agent=,kubernetes.io/role=agent,agentpool=agent2,storageprofile=managed,storagetier=Standard_LRS,accelerator=nvidia,kubernetes.azure.com/cluster=',variables('labelResourceGroup'),'

    #EOF

- path: /opt/azure/containers/kubelet.sh
  permissions: "0755"
  owner: root
  content: |
    #!/bin/bash

    


    # Disallow container from reaching out to the special IP address 168.63.129.16
    # for TCP protocol (which http uses)
    #
    # 168.63.129.16 contains protected settings that have priviledged info.
    #
    # The host can still reach 168.63.129.16 because it goes through the OUTPUT chain, not FORWARD.
    #
    # Note: we should not block all traffic to 168.63.129.16. For example UDP traffic is still needed
    # for DNS.
    iptables -I FORWARD -d 168.63.129.16 -p tcp -j DROP
    #EOF

runcmd:
- set -x
- . /opt/azure/containers/provision_source.sh
- aptmarkWALinuxAgent hold
'))]
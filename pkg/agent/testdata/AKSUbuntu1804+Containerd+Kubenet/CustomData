[base64(concat('#cloud-config

write_files:
- path: /opt/azure/containers/provision_source.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_installs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_configs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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







- path: /usr/local/bin/configure_azure0.sh
  permissions: "0544"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/6SU0W/bNhDG3/lXfJGFqsVmyR720CQQBsF2N6ONEsTZiiFwDVqiLM4KqZJUPNf2/z5QchS5W7ZhexN0d9/9+N2RvbOg0ipYchEw8Ygl1TkhPUyNpyFFsYVgCdOaqi2MRCJFxleVYqBfKsUG4AI/LythKgzf+oPvSaGXC8UKRjVDn2MPulmj/8678ODtSsWFgfvdwWv+ezt3GLrDSxwDw4OHPVaKleh/5nA+VbW06xCe4R7uDzgLMcD8EiZnggAAS3IJb2rANYQ0TzCzNS9bWC5WR1yvqfmdGwxIxskprvo/uHA+1Q78B9i6zv/XzD2McpaswTOr3GQhEfxYa8VNzhTzfR9CQjCW2tGpSsDkXEMnipfGlgtpSA9RoSVSKTyDDRXmJHeTM1GjVrol6ieCk3ucoZ8hYCYJEsEDwYyfBsNBv07xLUrBtcEcr149wVvyeArD6AMemDBcCotKTdPraIrlZSkyqZDQgif2BGYj1RqlLHiy/YuzkNpYJz7Ju4C7iyd3H69v3y9urj9MR78emtHcw/lzBGEIp+nnYH4ytL93foCl4umKWXxaKEbT7fMtSUkPH9nR3O4geAYtfcJLFFysoXO5eZLr+KUqsSiLasXF6zfYHWlKqYz1cTG6vrqK4nHoDutIQs0/j2OP3z7D8wV9YKAabv2xh58I/gtTmktR/348fu/hN/31/fybEDubftFUfYvnmou24tAtGczt/QhkaWom+8Q0C/QomCEHQjqHiW5/nIXe+7ezxc31eBFHV5PZTTSahCnLaFWYy24kbP2NrNwonnrkxJf4LprGk9vpODw/Pz/vxuLJXTwLA1UJa5HQQStFv9i17qRO39W9mMm/FrmJ7n4Ku8cidpC1Hmiawn29pJrV1rq7tuvhTWeeiMZj0j4U/ZX56qVo9VJWwHlJ0Hle0GG9oJ0G48kHcqLyItUfAQAA//+8Xj4iAgYAAA==

- path: /etc/systemd/system/kubelet.service
  permissions: "0644"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/6SUQW8bNxCF7/srCMGH9kBRstXAacCD3WxSI0YaeBXkYBsLLne8S4g73HCGstym/71YSXYiW0EdRCdpON+bpwH5Lj+i4+vsNZCNrmcXUL9LFXjg7I+AtRsqHwy3+coRk1aJovLBGq8qh2qxbc0u4HNyEUjbgGwcQqzHBHHpLGRZdllsvl5nF0BsImvjb80dZTkuXQzYAfIb50ErYKtquDHJ84N4kawFonzluGDDifR0dpTlK7DFoPUhgl6bqQy1QoWelfk7RVAPVuheakztHq5b1C4K2Qu1NFF5Vz1Mfk6vRfc9L9KKkbsRl+Lgly4kZPFFNBF6cTV6POlqJL6IWyuk/1VID2IirsUrwS2g2Ixd41JWDusnNp8WXokbN9rnfivTmQVIak2Ep2pZ9gikgaQ7suyFvBUIPHb9cjZm25cRODqgQ338/5ANEcYUOrOyAVFPXxwdz35gVGdWJd1hWRm78KF5Lr+e2gGRaaC0gVjPJj9IVSkS6+PJcxeD4Jp2vL3F48aW3Eagdqpnk5cvfk7jUB9PXx7+nMbRdnW7KnIjAxWbygMJyQLNcFe8I97b6vrHrZg6iM7eQ4/3tRsdNuCNa1KEcv1aJ8Pb/Ap8J2jEVSa2HykBh/lyiBmIOycYapDeVOBJjw7+effxND/P5+X7v17n5fnJaX5e/DvaAZb6UEj5EBgyJmTXgY7QBQYh7wsywucExHL4ERLr6W/dPlAC1n1wyDqhW/2ulIoJvwZSrb6NyWAXu2aCTx3I3qfGoaxd3MTisIKIwEBq07FpoG/Yg/t/+ub85G2x7+Aif3tWzPOL9S72lD+dzf8s5ydn7+dFll2eIbHx/jr7ZJChPr3TXfLsZCKIYzaxAf4vAAD//0p6fwdABgAA



- path: /etc/apt/apt.conf.d/99periodic
  permissions: "0644"
  owner: root
  content: |
    APT::Periodic::Update-Package-Lists "0";
    APT::Periodic::Download-Upgradeable-Packages "0";
    APT::Periodic::AutocleanInterval "0";
    APT::Periodic::Unattended-Upgrade "0";








- path: /etc/containerd/config.toml
  permissions: "0644"
  owner: root
  content: |
    version = 2
    subreaper = false
    oom_score = 0
    [plugins."io.containerd.grpc.v1.cri"]
        sandbox_image = "oss/kubernetes/pause:1.3.1"
        [plugins."io.containerd.grpc.v1.cri".containerd]
            [plugins."io.containerd.grpc.v1.cri".containerd.untrusted_workload_runtime]
                runtime_type = "io.containerd.runtime.v1.linux"
                runtime_engine = "/usr/bin/runc"
            [plugins."io.containerd.grpc.v1.cri".containerd.default_runtime]
                runtime_type = "io.containerd.runtime.v1.linux"
                runtime_engine = "/usr/bin/runc"
    
    [plugins."io.containerd.grpc.v1.cri".cni]
    bin_dir = "/opt/cni/bin"
    conf_dir = "/etc/cni/net.d"
    conf_template = "/etc/containerd/kubenet_template.conf"
    
    [plugins."io.containerd.grpc.v1.cri".registry.headers]
      X-Meta-Source-Client = ["azure/aks"]
    [metrics]
    address = "127.0.0.1:10257"
    #EOF

- path: /etc/containerd/kubenet_template.conf
  permissions: "0644"
  owner: root
  content: |
      {
          "cniVersion": "0.3.1",
          "name": "kubenet",
          "plugins": [{
            "type": "bridge",
            "bridge": "cbr0",
            "mtu": 1500,
            "addIf": "eth0",
            "isGateway": true,
            "ipMasq": true,
            "promisMode": true,
            "hairpinMode": false,
            "ipam": {
                "type": "host-local",
                "subnet": "{{.PodCIDR}}",
                "routes": [{ "dst": "0.0.0.0/0" }]
            }
          }]
      }

- path: /etc/systemd/system/containerd.service
  permissions: "0644"
  owner: root
  content: |
    [Unit]
    Description=containerd daemon
    After=network.target

    [Service]
    ExecStartPre=/sbin/modprobe overlay
    ExecStart=/usr/bin/containerd
    Delegate=yes
    KillMode=process
    OOMScoreAdjust=-999
    LimitNOFILE=1048576
    LimitNPROC=infinity
    LimitCORE=infinity

    [Install]
    WantedBy=multi-user.target

    #EOF

- path: /etc/systemd/system/containerd.service.d/exec_start.conf
  permissions: "0644"
  owner: root
  content: |
    [Service]
    ExecStartPost=/sbin/iptables -P FORWARD ACCEPT
    #EOF

- path: /etc/crictl.yaml
  permissions: "0644"
  owner: root
  content: |
    runtime-endpoint: unix:///run/containerd/containerd.sock
    #EOF

- path: /etc/sysctl.d/11-containerd.conf
  permissions: "0644"
  owner: root
  content: |
    net.ipv4.ip_forward = 1
    net.ipv4.conf.all.forwarding = 1
    net.bridge.bridge-nf-call-iptables = 1
    #EOF




- path: /etc/kubernetes/certs/ca.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    

- path: /etc/kubernetes/certs/client.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    



- path: /var/lib/kubelet/kubeconfig
  permissions: "0644"
  owner: root
  content: |
    apiVersion: v1
    kind: Config
    clusters:
    - name: localcluster
      cluster:
        certificate-authority: /etc/kubernetes/certs/ca.crt
        server: https://:443
    users:
    - name: client
      user:
        client-certificate: /etc/kubernetes/certs/client.crt
        client-key: /etc/kubernetes/certs/client.key
    contexts:
    - context:
        cluster: localcluster
        user: client
      name: localclustercontext
    current-context: localclustercontext
    #EOF

- path: /etc/default/kubelet
  permissions: "0644"
  owner: root
  content: |
    KUBELET_FLAGS=
    KUBELET_REGISTER_SCHEDULABLE=true
    NETWORK_POLICY=

    KUBELET_NODE_LABELS=kubernetes.azure.com/role=agent,agentpool=agent2,storageprofile=managed,storagetier=Premium_LRS,kubernetes.azure.com/cluster=',variables('labelResourceGroup'),'

    #EOF

- path: /opt/azure/containers/kubelet.sh
  permissions: "0755"
  owner: root
  content: |
    #!/bin/bash

    


    # Disallow container from reaching out to the special IP address 168.63.129.16
    # for TCP protocol (which http uses)
    #
    # 168.63.129.16 contains protected settings that have priviledged info.
    #
    # The host can still reach 168.63.129.16 because it goes through the OUTPUT chain, not FORWARD.
    #
    # Note: we should not block all traffic to 168.63.129.16. For example UDP traffic is still needed
    # for DNS.
    iptables -I FORWARD -d 168.63.129.16 -p tcp --dport 80 -j DROP
    #EOF

runcmd:
- set -x
- . /opt/azure/containers/provision_source.sh
- aptmarkWALinuxAgent hold
'))]